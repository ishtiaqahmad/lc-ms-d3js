<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta http-equiv="X-UA-Compatible" content="IE=10"/>
    <title>Quality Control Report Example by Ishtiaq Ahmad</title>
    <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet"
          media="screen" type="text/css">
    <link href="stylesheets/nv.d3.css" rel="stylesheet" media="screen" type="text/css">
    <script src="//code.jquery.com/jquery-1.10.1.min.js"></script>
    <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/d3/3.1.6/d3.min.js" charset="utf-8"></script>
    <script src="javascripts/nv.d3.min.js"></script>
    <script src="javascripts/modifyMultiChart.js" charset="utf-8"></script>
    <script src="javascripts/qualityControl.js" charset="utf-8"></script>

    <style>
        .dashboardChart svg {
            height: 500px;
        }

        .dashboardChart {
            margin: 0;
        }

        #ISAreaMultiChart svg {
            height: 500px;
            margin: 0px;
            min-width: 100px;
            min-height: 100px;
        }

        #QCfitMultiChart svg {
            height: 500px;
            margin: 0px;
            min-width: 100px;
            min-height: 100px;
        }

        .highlight {
            stroke-width: 7px;
            stroke: #f00;
            fill-opacity: .95 !important;
            stroke-opacity: .95 !important;
        }

        circle {
            -webkit-transition: fill-opacity 250ms linear;
        }

        .selecting circle {
            fill-opacity: .2;
        }

        .selecting circle.selected {
            stroke: #f00;
        }

        .resize path {
            fill: #666;
            fill-opacity: .8;
            stroke: #000;
            stroke-width: 1.5px;
        }

        .axis path, .axis line {
            fill: none;
            stroke: #000;
            shape-rendering: crispEdges;
        }

        .brush .extent {
            fill-opacity: .125;
            shape-rendering: crispEdges;
        }
    </style>
</head>

<body>
<script type="text/javascript">

    d3.json(url, function (error, jsonData) {
        if (error) return console.warn(error);
        else {
            callbackGrid(jsonData);
        }
    });

    function callbackGrid(matlabX) {
        jsonObj = matlabX;
        if (jsonObj.Dashboard) {
            jsonObj = jsonObj.Dashboard;
        }
        Dashboard = jsonObj;

        var comboList = $("#compound");
        $.each(Dashboard.metabolites, function (i, comp) {
            comboList.append($("<option></option>")
                    .attr("value", i)
                    .text(comp.Name));
        });

        drawVisibleCharts();
        drawISAreaMultiChart();
        drawQcFitMultiChart();
        drawContextBrush();
        $('#pleaseWaitDialog').modal('hide');
    }

    $(function () {
        $('#pleaseWaitDialog').modal('show');
        $("#compound").change(function () {
            drawVisibleCharts();
            drawISAreaMultiChart();
            drawQcFitMultiChart();
        });
    });
    $(function () {
        $("#settingform").submit(function (event) {
            event.preventDefault();
            $("#settingform input").each(function (idx, checkboxs) {
                switch (checkboxs.id) {
                    case "showArea" :
                        chartsSettingArr.areaChart.visible = checkboxs.checked ? true : false;
                        break;
                    case "showRT":
                        chartsSettingArr.rtChart.visible = checkboxs.checked ? true : false;
                        break;
                    case "showRatioUnc" :
                        chartsSettingArr.ratioChart.visible = checkboxs.checked ? true : false;
                        break;
                    case "showRatioQ" :
                        chartsSettingArr.ratioQChart.visible = checkboxs.checked ? true : false;
                        break;
                    default :
                        //reset default here
                        break;
                }
            });
            $('#advancedSettings').modal('hide');
            drawVisibleCharts();
        })
    });
</script>

<div class="tabbable tabs-left">
    <ul class="nav nav-tabs ulfloatleft liremovefloat">
        <li class="active"><a href="#home" data-toggle="tab">Dashboard</a></li>
        <li><a href="#profile" data-toggle="tab">ISTD and RT outliers</a></li>
        <li><a href="#messages" data-toggle="tab">PCA outlining points</a></li>
        <li><a href="#settings" data-toggle="tab">Linearity</a></li>
        <li><a href="#contact" data-toggle="tab">Calibrant Correction</a></li>
        <li><a href="#contact1" data-toggle="tab">Blanks Effects</a></li>
    </ul>

    <div class="tab-content">
        <div class="tab-pane fade in active" id="home">
            <table>
                <tr>
                    <td style="padding: 5px;" align="right" valign="top" nowrap>Selected Metabolites/Compound :</td>
                    <td>
                        <select class="dropdown" name="compound" id="compound"/>
                    </td>
                </tr>
                <tr>
                    <td></td>
                    <td></td>
                </tr>
            </table>
            <a href="#advancedSettings" role="button" data-toggle="modal"
               class="btn btn-warning pull-right">Settings</a>

            <!-- Advanced Setting Modal -->
            <div id="advancedSettings" class="modal hide fade" tabindex="-1" role="dialog"
                 aria-labelledby="advancedSettings"
                 aria-hidden="true">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                    <ul class="nav nav-pills pull-right">
                        <li class="active">
                            <a href="#screenSetting" data-toggle="pill">Screen settings</a>
                        </li>
                    </ul>
                    <h4>Multiple Graphs on the same screen</h4>
                </div>

                <div class="modal-body">
                    <div class="row-fluid">
                        <div class="tab-content">
                            <div class="tab-pane active" id="screenSetting">
                                <div class="control-group">
                                    <form id="settingform" action="#" title="">
                                        <fieldset>
                                            <div class="controls controls-row">
                                                <label class="checkbox">
                                                    <input type="checkbox" id="showArea" checked> Area
                                                </label>
                                                <label class="checkbox">
                                                    <input type="checkbox" id="showRT" checked> Retention Time
                                                </label>
                                                <label class="checkbox">
                                                    <input type="checkbox" id="showRatioUnc"
                                                           checked> Ratio (uncorrected)
                                                </label>
                                                <label class="checkbox">
                                                    <input type="checkbox" id="showRatioQ" checked> Ratio (QC corrected)
                                                </label>
                                            </div>
                                            <button type="submit" class="btn btn-warning">Save</button>
                                        </fieldset>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Wait Modal -->
            <div id="pleaseWaitDialog" class="modal hide fade" tabindex="-2" role="dialog"
                 aria-labelledby="pleaseWaitDialog"
                 aria-hidden="true">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                    <h4>Processing...</h4>
                </div>

                <div class="modal-body">
                    <div class="row-fluid">
                        <div class="tab-content">
                            <div class="tab-pane active">
                                <div class="control-group">
                                    <div class="progress progress-striped active">
                                        <div class="bar" style="width: 100%;"></div>
                                    </div>
                                    <p>Please wait!! we are loading a large Metabolites / Compound list</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="contextBrush">
                <svg></svg>
            </div>

            <div id="DashboardChartArea"></div>

            <div id="ISAreaMultiChart">
                <svg></svg>
            </div>

            <div id="QCfitMultiChart">
                <svg></svg>
            </div>

        </div>

        <div class="tab-pane fade" id="profile">
            <h3>ISTD and RT outliers graphs will appears here!</h3>

        </div>

        <div class="tab-pane fade" id="messages">
            <h3>PCA outlining points graphs will appears here!</h3>

        </div>

        <div class="tab-pane fade" id="settings">
            <h3>Linearity graphs will appears here!</h3>

        </div>

        <div class="tab-pane fade" id="contact">
            <h3>Calibrant Correction graphs will appears here!</h3>

        </div>

        <div class="tab-pane fade" id="contact1">
            <h3>Blanks Effects graphs will appears here! </h3>

        </div>
    </div>
</div>
<hr/>
</body>
</html>
